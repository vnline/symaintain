{% extends "systack/base.html" %}{% block title %}SYMainTain_常用命令{% endblock %}{% block mainbar %}    <div class="mainbar">    <div class="page-head">        <h2 class="pull-left"><i class="icon-table"></i>常用命令</h2>        <!-- Breadcrumb -->        <div class="bread-crumb pull-right">            <a href="/"><i class="icon-home"></i> Home</a>            <span class="divider">/</span>            <a href="/operation" class="bread-current">Operation</a>        </div>        <div class="clearfix"></div>    </div>    <div class="matter">        <div class="container-fluid">            <div class="row-fluid">                <div class='span12'>                    <div class="widget">                        <div class="widget-head">                            <div class="pull-left">常用命令</div>                            <div class="widget-icons pull-right">                                <a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>                                <a href="#" class="wclose"><i class="icon-remove"></i></a>                            </div>                            <div class="clearfix"></div>                        </div>                        <div class="widget-content">                            <div class="padd">                                <div class="form quick-post">                                    <form class="form-inline" id="form-execute" >{% csrf_token %}                                        <div class="controls">                                            <h3>请输入命令参数：</h3></br>                                            {{ data }}                                            <input type="text" id="target" class="input-max" placeholder="目标" name="target">                                            <input type="text" id="mod" class="input-max" data-provide="typeahead" data-source='["node_sys.ping","game_tools.hot_file","change_client_version"]' placeholder="命令" name="mod">                                            <input type="text" id="arg" class="input-xlarge" placeholder="参数" name='arg'>                                            <button type="button" class="btn" id="execute">执行命令</button>                                        </div>                                    </form>                                </div>                            </div>                        </div>                        <div class="clearfix"></div>                        <div class="widget-head">                            <div class="pull-left">执行日志</div>                            <div class="clearfix"></div>                        </div>                        <div class="widget-content">                            <div class="padd" id="padd"></div>                        </div>                    </div>                </div>            </div>        </div>    </div>{% endblock %}{% block js %}    <script type="text/javascript">        $(function(){            $("#execute").click(function(){                $.ajax({                    type: "POST",                    url: "{% url 'systack.views.operation' %}",                    data : $("#form-execute").serialize(),                    success: get_logs                })            });            function get_logs(jid){                $.ajax({                    type: "GET",                    url: "{% url 'systack.views.get_log' %}",                    data : {conf_jids:jid,queue_id:'salt.db.return'},                    success: function(data){                        $("#padd").html(data)                        $("th#a").hide(),                                $("td#b").hide(),                                console.log(data)                    }                })            }        })    </script>{% endblock %}