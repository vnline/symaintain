{% extends "systack/base.html" %}{% block title %}SYMainTain_常用命令{% endblock %}{% block mainbar %}    <div class="mainbar">        <div class="page-head">            <h2 class="pull-left"><i class="icon-table"></i>常用命令</h2>            <!-- Breadcrumb -->            <div class="bread-crumb pull-right">                <a href="/"><i class="icon-home"></i> Home</a>                <span class="divider">/</span>                <a href="/operation" class="bread-current">Operation</a>            </div>            <div class="clearfix"></div>        </div>        <div class="matter">            <div class="container-fluid">                <div class="row-fluid">                    <div class='span12'>                        <div class="widget">                            <div class="widget-head">                                <div class="pull-left">常用命令</div>                                <div class="widget-icons pull-right">                                    <a href="#" class="wminimize"><i class="icon-chevron-up"></i></a>                                    <a href="#" class="wclose"><i class="icon-remove"></i></a>                                </div>                                <div class="clearfix"></div>                            </div>                            <div class="widget-content">                                <div class="padd">                                    <div class="form quick-post">                                        <form class="form-inline" id="form-execute" >{% csrf_token %}                                            <div class="controls">                                                <h3 style="text-align:center">请输入命令参数：</h3>                                                <div class="control-group">                                                    <label class="control-label" for="as_role">节点： </label>                                                    <label>                                                        <select id="role" name="as_role"                                                                class="selectpicker bla bla bli show-tick">                                                            <option value="main">main</option>                                                            <option value="node">node</option>                                                        </select>                                                    </label>                                                    <label class="control-label" for="target">目标： </label>                                                    <input type="text" id="target" class="input-medium" placeholder="目标" name="target">                                                    <label class="control-label" for="mod">命令： </label>                                                    <label>                                                        <select name="cmd" class="selectpicker bla bla bli show-tick"                                                                data-live-search="true">                                                            <optgroup label="main">                                                                <option value="ping">ping</option>                                                            </optgroup>                                                        </select>                                                    </label>                                                    <label class="control-label" for="arg">参数： </label>                                                    <input type="text" id="arg" class="input-xlarge" placeholder="参数" name='arg'>                                                    <button type="button" class="btn" id="execute">执行命令</button>                                                </div>                                            </div>                                        </form>                                    </div>                                </div>                            </div>                            <div class="clearfix"></div>                            <div class="widget-head">                                <div class="pull-left">执行日志</div>                                <div class="clearfix"></div>                            </div>                            <div class="widget-content">                                <div class="padd" id="padd"></div>                            </div>                        </div>                    </div>                </div>            </div>        </div>    </div>{% endblock %}{% block js %}    <script type="text/javascript">        $(function(){            $("#execute").click(function(){                $.ajax({                    type: "POST",                    url: "{% url 'systack.views.operation' %}",                    data : $("#form-execute").serialize(),                    success: get_logs                })            });            function get_logs(jid){                var as_role=$("#role").find("option:selected").text();                $.ajax({                    type: "GET",                    url: "{% url 'systack.views.get_log' %}",                    data : {conf_jids:jid,role:as_role},                    success: function(data){                        $("#padd").html(data);                        if(as_role == "main"){                            $("th#file").hide();                            $("th#node").hide();                            $("td#value").hide();                            $("td#node_id").hide();                            $("#log").remove();                        }                        else{                            $("th#role").hide();                            $("th#file").hide();                            $("td#value").hide();                            $("td#role_id").hide();                            $("#log").remove();                            }                    },                    error: function(data){                        $('#hotlog').modal()                    }                })            }        })    </script>    <script type="text/javascript">        $(window).on('load', function () {            $('.selectpicker').selectpicker({                'selectedText': 'cat'            });            // $('.selectpicker').selectpicker('hide');        });    </script>{% endblock %}